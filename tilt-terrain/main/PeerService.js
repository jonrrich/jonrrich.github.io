window.PeerService=["$timeout",function(g){var h=function(a){for(var b="",c=0;c<a;c++)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(26*Math.random())];return b}(8),k=function(){},e=!1,l=function(){},m=function(a){},n=function(a){},f,b,c,d=!1,p=function(){b=new Peer(h,{key:"zf0on11pxxqrggb9"});b.on("error",function(a){n(a)});b.on("open",function(){b.on("connection",function(a){c=a;c.on("open",function(){d=!0;k();c.on("data",function(a){a.ping&&c.send({pong:!0});f&&g.cancel(f);e&&d&&(f=g(function(){d=
!1;l()},e));m(a)})})})})};return{pairingKey:h,config:function(a){a=a||{};a.onConnect&&(k=a.onConnect);a.heartbeatExpectation&&(e=a.heartbeatExpectation);a.onNoHeartbeat&&(l=a.onNoHeartbeat);a.onReceive&&(m=a.onReceive);a.onError&&(n=a.onError)},disconnect:function(){b&&b.disconnect()},breakConnection:function(){d=!1;c&&c.close()},connect:function(){b?b.disconnected&&b.reconnect():p()},isConnected:function(){return d}}}];