(function(){var k=document.getElementById("pairing-key"),l=document.getElementById("pair-btn"),g=document.getElementById("status"),b,e,d=!0,h=new GyroNorm;h.init().then(function(){h.start(function(a){d&&(a["do"].alpha||a["do"].beta||a["do"].gamma||a.dm.x||a.dm.y||a.dm.z||a.dm.gx||a.dm.gy||a.dm.gz||a.dm.alpha||a.dm.beta||a.dm.gamma||(d=!1,alert("Could not detect device orientation. Make sure you are using this controller on a mobile device.")),a=a["do"].beta*Math.PI/180,b&&b.send({theta:a}))})})["catch"](function(a){d&&
(d=!1,alert("Could not detect device orientation. Make sure you are using this controller on a mobile device."))});l.onclick=function(){var a=k.value.trim().toUpperCase(),c=new Peer({key:"zf0on11pxxqrggb9"});c.on("open",function(){var f=c.connect(a);f.on("open",function(){c.disconnect();b=f});f.on("data",function(a){e=Date.now()})});c.on("error",function(a){c.disconnect();switch(a.type){case "browser-incompatible":alert("Sorry, your browser is outdated and does not support all of the features needed to use tilt controls. Please upgrade your browser or use the arrow key controls.");
break;case "network":case "server-error":alert("Couldn't connect to the server. Please check your internet connection and refresh.");break;case "unavailable-id":alert("Someone else is already using your pairing key. Please refresh and try again.");break;default:alert("Something went wrong while trying to connect the controller. Please refresh and try again.")}})};setInterval(function(){b&&b.send({ping:!0});!e||2E3<Date.now()-e?g.innerHTML="Not Connected.":g.innerHTML="Connected!"},500)})();